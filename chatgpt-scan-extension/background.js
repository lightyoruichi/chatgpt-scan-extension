chrome.runtime.onMessage.addListener((e,t)=>{var o,c;if(e.type==="UPDATE_BADGE"&&((o=t.tab)!=null&&o.id)){const i=e.count.toString();chrome.action.setBadgeText({text:i,tabId:t.tab.id}),chrome.action.setBadgeBackgroundColor({color:"#00f2fe",tabId:t.tab.id})}e.type!=="INTERCEPTOR_READY"&&e.type==="REINJECT_INTERCEPTOR"&&(c=t.tab)!=null&&c.id&&chrome.scripting.executeScript({target:{tabId:t.tab.id},files:["interceptor.js"],world:"MAIN"}).catch(()=>{})});chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.create({id:"search-on-google",title:"Verify with Google Search",contexts:["selection"]}),chrome.contextMenus.create({id:"explain-with-chatgpt",title:"Explain with ChatGPT",contexts:["selection"]})});chrome.contextMenus.onClicked.addListener(e=>{if(!e.selectionText)return;const t=encodeURIComponent(e.selectionText);e.menuItemId==="search-on-google"?chrome.tabs.create({url:`https://www.google.com/search?q=${t}`}):e.menuItemId==="explain-with-chatgpt"&&chrome.tabs.create({url:`https://chatgpt.com/?q=${t}`})});chrome.tabs.onUpdated.addListener((e,t,o)=>{const c=["chatgpt.com","claude.ai","perplexity.ai","gemini.google.com"];if(!o.url)return;c.some(n=>{var r;return(r=o.url)==null?void 0:r.includes(n)})&&t.status==="loading"&&setTimeout(()=>{chrome.scripting.executeScript({target:{tabId:e},files:["interceptor.js"],world:"MAIN"}).catch(()=>{})},100)});console.log("[AI Search Revealer] Background Script Loaded");
